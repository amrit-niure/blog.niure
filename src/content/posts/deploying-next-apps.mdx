---
title: PHP Database Connection
description: How to talk to database using php.
date: 2023-01-02
relatedto: deployment
readingTime : 6 min 45 sec
tags:
  - Next Js
  - Vercel
  - deployment
---
# PHP Database Connection and Operations

A simple PHP program that connects to a database, creates a table, and inserts two student records, all in one file.

```php
<?php
// Database connection settings
$servername = "localhost";
$username = "root";
$password = "";
$dbname = "mydatabase";

// Create connection
$conn = new mysqli($servername, $username, $password, $dbname);

// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}
echo "Connected to database successfully!<br>";

// Create Student table
$sql = "CREATE TABLE IF NOT EXISTS Student (
    StdId INT PRIMARY KEY,
    StdName VARCHAR(50) NOT NULL,
    Gender VARCHAR(10) NOT NULL
)";

if ($conn->query($sql) === TRUE) {
    echo "Student table created successfully!<br>";
} else {
    echo "Error creating table: " . $conn->error . "<br>";
}

// Insert first student record
$sql = "INSERT INTO Student (StdId, StdName, Gender) 
        VALUES (1, 'John Doe', 'Male')";

if ($conn->query($sql) === TRUE) {
    echo "First student record inserted!<br>";
} else {
    echo "Error inserting first record: " . $conn->error . "<br>";
}

// Insert second student record
$sql = "INSERT INTO Student (StdId, StdName, Gender) 
        VALUES (2, 'Jane Smith', 'Female')";

if ($conn->query($sql) === TRUE) {
    echo "Second student record inserted!<br>";
} else {
    echo "Error inserting second record: " . $conn->error . "<br>";
}

// Close connection
$conn->close();
?>
```

## Explanation

### 1. Making Friends with the Database
- Imagine the database is like a toy box named "mydatabase"
- We say "Hello" to the toy box using `$conn = new mysqli(...)`
- If we can't open the toy box, we say "Oh no! Connection failed!"

### 2. Creating a Special Shelf for Toys
- We make a special shelf called "Student" with 3 compartments:
  - `StdId` (Student ID - like a special number for each toy)
  - `StdName` (Student Name - the name we put on the toy)
  - `Gender` (Is it a "boy" toy or "girl" toy or whatever)

### 3. Putting Toys on the Shelf
- We put two toys on our new shelf:
  1. First toy: ID=1, Name="John Doe", Gender="Male"
  2. Second toy: ID=2, Name="Jane Smith", Gender="Female"
- Each time we put a toy, we check if it went on the shelf properly

### 4. Saying Goodbye
- When we're done playing, we close the toy box with `$conn->close()`

### What Each Part Does:
- `$servername`, `$username`, `$password`, `$dbname` - These are like secret codes to open the toy box
- `new mysqli()` - This is how we say "Hello" to the database
- `CREATE TABLE` - This makes our special shelf with compartments
- `INSERT INTO` - This puts our toys (student records) on the shelf
- `$conn->query()` - This is how we tell the database what we want to do
- `$conn->close()` - This is how we say "Goodbye" to the database

When you run this program, it will:
1. Connect to the database
2. Make a Student table (if it doesn't exist)
3. Add two students
4. Tell you what it did at each step!

What I've written here is probably long enough, but adding this final sentence can't hurt.
